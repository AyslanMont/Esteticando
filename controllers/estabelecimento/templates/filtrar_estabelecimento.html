{% extends "base.html" %}

{% block links %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/filtrar_estabelecimento.css') }}">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">
{% endblock %}

{% block content %}
<main>
  <div class="filtros">
    <div class="search">
      <form action="{{ url_for('estabelecimento.filtrar_estabelecimento') }}" method="POST">
        <label for="estado">Selecione seu estado:</label>
        <select id="estado" name="estado">
          <!-- opções de estados -->
        </select>
        <input type="text" name="cidade" placeholder="Cidade">
        <input type="text" name="bairro" placeholder="Bairro">
        <input type="text" name="nome" placeholder="Nome do estabelecimento">
        <input type="submit" value="Filtrar">
      </form>
    </div>

    <div class="resultados">
      {% if result_est %}
        {% for estabelecimento in result_est %}
        <div class="estabelecimento">
          <!-- Imagem pequena no quadrado à esquerda -->
          <div class="foto">
            {% if estabelecimento.imagem_base64 %}
              <img src="data:image/jpeg;base64,{{ estabelecimento.imagem_base64 }}" 
                   alt="Imagem do {{ estabelecimento.est_nome }}">
            {% else %}
              <img src="{{ url_for('static', filename='imgs/sem_imagem.png') }}" 
                   alt="Sem imagem disponível">
            {% endif %}
          </div>

          <div class="interacao">
            <div class="informacoes">
              <h3>{{ estabelecimento.est_nome }}</h3>
              <p>{{ estabelecimento.end_bairro }}, {{ estabelecimento.end_cidade }} - {{ estabelecimento.end_estado }}</p>
            </div>
            <div class="interecao-buttons">
              <img src="{{ url_for('static', filename='imgs/favorito.png') }}" alt="Favorito" />
              <button>
                <a href="{{ url_for('estabelecimento.perfil_estabelecimento', est_id=estabelecimento.est_id) }}">
                  Agenda
                </a>
              </button>
            </div>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <p class="text-muted">Nenhum estabelecimento encontrado. Tente ajustar seus filtros.</p>
      {% endif %}
    </div>
  </div>
</main>
{% endblock %}
